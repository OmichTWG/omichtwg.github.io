"use strict";const __drawInstance=e=>{drawSprite(e.sprite,e.x,e.y,e.rotation,e.scaleX,e.scaleY,e.opacity,e.frameNumber,e.tpX,e.tpY)},__drawTile=(e,l)=>{__ctx.drawImage(e.tile,l.tx,l.ty,e.tileSize.w,e.tileSize.h,l.x-camera.x,l.y-camera.y,e.tileSize.w,e.tileSize.h)},__render=()=>{__frames++;const e=Date.now();deltaTime=(e-__timePrevious)/1e3*__config.fps,__timePrevious=e,__ctx.fillStyle=__config.canvas.background,__ctx.fillRect(0,0,__canvas.width,__canvas.height);for(let e of __instances)if(!e.tile){const l=e.x,i=e.y;e.step&&e.step(),e.xPrevious=l,e.yPrevious=i}let l=__instances.length-1;for(;l>=0;){const e=__instances[l];for(let i=0;i<l;i++){const l=__instances[i];if(l.collider&&e.collider){const i=l.collide.includes(e.name)||l.collide.includes(e.parent),o=e.collide.includes(l.name)||e.collide.includes(l.parent);(o&&e.collision||i&&l.collision)&&(__checkCollision(l,e)?(o&&e.collision(l),i&&l.collision(e)):(o&&e.noCollision&&e.noCollision(l),i&&l.noCollision&&l.noCollision(e)))}}l--}for(let e of __instances)if(e.tile){__ctx.save(),__ctx.scale(camera.scaleX,camera.scaleY);for(let l of e.tiles){const i=l.x-camera.x,o=l.y-camera.y;i+e.tileSize.w>0&&o+e.tileSize.h>0&&i<camera.w()&&o<camera.h()&&__drawTile(e,l)}__ctx.restore()}else{if(e.draw?(__ctx.save(),e.draw(),__ctx.restore()):e.sprite&&__drawInstance(e),e.sprite){const l=e.frameNumber+e.animationSpeed;e.frameNumber=l<e.sprite.length?l:0}if(__config.debug.colliders){if(__ctx.save(),e.collider)switch(setStrokeColor("white"),e.collider.type){case"box":drawRectFull({x:e.x+e.collider.x1-camera.x,y:e.y+e.collider.y1-camera.y,w:e.collider.x2-e.collider.x1,h:e.collider.y2-e.collider.y1,rotation:e.collider.rotation,stroke:!0});break;case"ellipse":drawEllipseFull({x:e.x-e.collider.rw-camera.x+(e.collider.x||0),y:e.y-e.collider.rh-camera.y+(e.collider.y||0),w:2*e.collider.rw,h:2*e.collider.rh,rotation:e.collider.rotation,stroke:!0});break;case"point":drawPoint(e.x+(e.collider.x||0)-camera.x,e.y+(e.collider.y||0)-camera.y);break;case"polygon":drawPolygon(e.collider.vertices.map((l=>[e.x+l[0]-camera.x,e.y+l[1]-camera.y])))}__ctx.restore()}}keyDown=new Set,keyUp=new Set,mouseDown=new Set,mouseUp=new Set,__config.debug.fps&&__drawFps()};