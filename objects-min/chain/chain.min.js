addObject({name:"chain",length:global.chainLength/4.5,last:null,first:null,create(){this.links=[];let t=null;for(let s=0;s<this.length;s++){const i=instanceCreate("link",this.x+5*s,this.y);0===s&&(this.first=i),i.last=t,t&&(t.next=i),t=i,this.links.push(i)}this.last=t},step(){this.last?.next||(this.last.next=global.player),this.first?.last||(this.first.last=global.strongman);const t=this.first?.last,s=this.last?.next;s&&t&&this.links.forEach(((i,l)=>{if(i.isDissapear)return;const n=l/this.links.length;let e=i.x,a=i.y;const h=i.last?.x||e,r=i.last?.y||a,o=i.next?.x||e,c=i.next?.y||a,x=getDirectionVector(h,r,o,c),y=angleByDirection(x),g=(t,s)=>1e3*(s*Math.cosh((t-.5)/s)-s),f=(distanceBetween(t.x,t.y,s.x,s.y)/10)**2.5+12,k=g(0,f)-g(n,f);this.links[l].y=t.y*(1-n)+s.y*n+k,this.links[l].x=t.x*(1-n)+s.x*n,this.links[l].rotation=y}))}});