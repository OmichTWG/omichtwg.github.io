addObject({name:"platform",sprite:sprites.get("platform"),offset:0,startY:0,tpX:32,tpY:6,parent:"solid",collider:{type:"box",x1:-30,y1:-6,x2:30,y2:6},depth:-1,spriteChain:sprites.get("chainBig"),speed:Math.PI/32,ended:!0,create(){this.startY=this.y,this.top=this.properties?.top??!1,"vertical"===this.properties?.variant&&(this.sprite=sprites.get("platformVertical"),this.tpY=32,this.tpX=16,this.collider={type:"box",x1:-6,y1:-30,x2:6,y2:30}),"stairs"===this.properties?.variant&&(this.sprite=sprites.get("stairs"),this.tpX=40,this.tpY=32,this.collider={type:"box",x1:-37,y1:-5,x2:37,y2:5,rotation:-26}),this.top?this.offset=-Math.PI/2:this.offset=Math.PI/2,this.sound=!0},trigger(){this.top=!this.top,this.ended=!1,this.properties?.cinematic&&(global.pause=!0,global.camera.target=this,this.speed=Math.PI/128),this.sound=!1},check(){!this.ended&&this.properties?.cinematic&&(global.pause=!1,global.camera.target=global.player,this.ended=!0)},step(){const t=Math.abs(global.camera.x+camera.w()/2-global.camera.target.x)<2,s=Math.abs(global.camera.y+camera.h()/2-global.camera.target.y)<2;(!(this.properties?.cinematic&&!this.ended)||t&&s)&&(this.sound||(playSoundWV("platformMove",.3),this.sound=!0),this.top?this.offset>-Math.PI/2?this.offset-=this.speed:this.check():this.offset<Math.PI/2?this.offset+=this.speed:this.check(),this.y=this.startY+32*Math.sin(this.offset))},draw(){const t=-Math.ceil(this.y/32);for(let s=0;s>t;s--)drawSprite(this.spriteChain,this.x-16,this.y-32+32*s);__drawInstance(this)}});
